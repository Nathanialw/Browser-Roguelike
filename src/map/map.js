import {Create_Object, Create_Map_Line} from '../graphics/graphics.js';
import {Set_Enemies, Set_Player, Set_Objects} from '../objects/objects.js';

let mapDisplay = [];
let fill = [];

// for testing start

// let mapString = "\
// ###################################################################################################\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// #.................................................................................................#\
// ###################################################################################################";
// let mapWidth = 99;
// Make_Map(mapString, mapWidth);
// let units = "H0303g0349o2357g0342g0349g4349g3349";
// Populate_Map(units)

// for testing end



export function Make_Map(serverMap, mapWidth) {
    for (let i = 0; i < mapWidth; i++) {
        //render lines of the map
        let object = serverMap.substring((i * mapWidth), ((i * mapWidth) + mapWidth));
        mapDisplay[i] = Create_Map_Line(object, i);
    }
}
    
export function Populate_Map(unitOnMap) {
    for (let i = 0; i < unitOnMap.length; i+=5) {
        let object = Create_Object(unitOnMap[i], unitOnMap.substring(i+1,i+3), unitOnMap.substring(i+3,i+5));
        console.log(unitOnMap.substring(i,i+5));
        if (unitOnMap[i] === 'H') {
            Set_Player(object);
        }
        else if (unitOnMap[i] === 'g') {
            Set_Enemies(object);
        }
        else if (unitOnMap[i] === 'o') {
            Set_Objects(object);
        }
    }
}